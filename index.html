<!DOCTYPE html>
<html lang="en">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <title>When life gives youüçãüçãüçã</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#000b1a; 
      --panel:#001133; 
      --panel-light:#002266; 
      --yellow:#ffff66;
      --yellow-dark:#c4c812;
      --blue:#00f0ff;
      --blue-dark:#0088cc;
      --text:#fff9d6;
      --danger:#ff3b6b;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; margin:0; overflow: auto; }
    body {
      font-family: 'Press Start 2P', monospace;
      background: var(--bg);
      color: var(--text);
      display: grid;
      place-items: center;
      padding: 28px 12px 60px;
      position: relative;
      image-rendering: pixelated;
    }

    body, canvas, .frame, button, h1, h2, .money, .stats, .upgrade, .log {
      image-rendering: pixelated;
      image-rendering: crisp-edges;
    }

    /* CRT scanline overlay */
    body::after {
      content:"";
      position:fixed;
      inset:0;
      background: repeating-linear-gradient(
        to bottom,
        rgba(0,0,0,0.2) 0px,
        rgba(0,0,0,0.2) 1px,
        transparent 1px,
        transparent 3px
      );
      pointer-events:none;
      z-index:9999;
      mix-blend-mode: multiply;
      opacity:0.4;
    }

    #particleCanvas {
      position: absolute;
      top:0; left:0;
      width:100%; height:100%;
      z-index:-1;
      pointer-events:none;
      mix-blend-mode: screen;
      transition: opacity 0.2s ease;
    }

    body::before{
      content:"";
      position: fixed; inset:0;
      pointer-events:none;
      background:
        repeating-linear-gradient(to bottom, rgba(255,255,150,0.05) 0 2px, transparent 2px 4px),
        repeating-linear-gradient(to right, rgba(0,255,255,0.02) 0 2px, transparent 2px 4px);
      mix-blend-mode: overlay;
      animation: hum 6s steps(2,end) infinite;
    }
    @keyframes hum { 0%,100%{opacity:.15} 50%{opacity:.35} }

    .frame{
      position: relative;
      z-index:1;
      width: min(780px, 94vw);
      background: var(--panel);
      padding: 18px;
      border: 4px solid var(--yellow);
      box-shadow: 0 0 12px var(--yellow), 0 0 0 4px #000, 0 0 24px var(--blue);
      animation: fadeIn 1s ease-out, neonPulse 2s infinite alternate;
      text-align: center;
    }
    @keyframes fadeIn { from { opacity:0; transform:scale(0.95);} to {opacity:1; transform:scale(1);} }
    @keyframes neonPulse { from { box-shadow:0 0 12px var(--yellow),0 0 24px var(--blue);} to { box-shadow:0 0 24px var(--yellow),0 0 48px var(--blue);} }

    h1 {
      font-size: clamp(18px, 4.2vw, 28px);
      margin: 0 0 18px;
      text-shadow: 0 0 4px #fff,0 0 8px var(--yellow),0 0 12px var(--blue),0 0 18px var(--yellow);
      color: var(--yellow);
      animation: flicker 6s infinite;
    }
    @keyframes flicker { 0%,19%,21%,23%,25%,54%,56%,100%{opacity:1;text-shadow:0 0 4px #fff,0 0 8px var(--yellow),0 0 12px var(--blue);} 20%,22%,24%,55%{opacity:0.7;text-shadow:0 0 2px #fff,0 0 4px var(--yellow),0 0 6px var(--blue);} }

    .money { font-size: clamp(14px, 3.4vw, 22px); margin:14px 0 18px; color: var(--yellow); text-shadow:0 0 6px #fff,0 0 10px var(--yellow); display:flex; align-items:center; justify-content:center; }

    button {
      font-family:'Press Start 2P', monospace; padding:12px 16px; margin:8px; font-size:12px; cursor:pointer;
      background: linear-gradient(145deg, var(--yellow), var(--blue));
      color:#000; border:4px solid #000;
      box-shadow: inset -4px -4px 0 var(--yellow-dark), inset 4px 4px 0 #fff,0 4px 0 var(--blue-dark);
      transition: transform .1s, filter .2s;
      animation: flicker 6s infinite;
    }
    button:hover { animation: wiggle 0.3s ease-in-out,flicker 6s infinite; filter: brightness(1.2); }
    @keyframes wiggle { 0%,100%{transform:rotate(0deg);} 25%{transform:rotate(2deg);} 75%{transform:rotate(-2deg);} }

    .sell-btn { background: linear-gradient(145deg, var(--yellow), var(--blue)); border-color: var(--blue-dark); animation: neonPulse 1.2s infinite alternate, flicker 6s infinite; }

    .upgrade, .stats, .log { background: var(--panel-light); border:4px solid var(--yellow); padding:12px; margin:16px auto; box-shadow:0 4px 0 #000,inset 0 0 12px rgba(255,255,0,0.4), inset 0 0 12px rgba(0,255,255,0.4); max-width:560px; animation:flicker 6s infinite; }

    h2 { color: var(--yellow); text-shadow:0 0 6px #fff,0 0 12px var(--blue); }

    .log { height:120px; overflow-y:auto; font-size:11px; color:var(--yellow); background:#000822; border-color: var(--yellow); }
    .log div { padding:2px 0; animation: slideIn 0.3s ease-out; }
    @keyframes slideIn { from{opacity:0;transform:translateX(-10px);} to{opacity:1;transform:translateX(0);} }

    .bottom-reset { margin-top:18px; }
    .bottom-reset button { background: linear-gradient(var(--yellow), var(--blue)); color:#000; animation: slowPulse 2s infinite alternate, flicker 6s infinite; }
    @keyframes slowPulse { from{transform:scale(1); box-shadow:0 0 6px var(--yellow),0 0 12px var(--blue);} to{transform:scale(1.05); box-shadow:0 0 12px var(--yellow),0 0 24px var(--blue);} }
  </style>
</head>
<body>
  <canvas id="particleCanvas"></canvas>
  <div class="frame">
    <h1>Lemonade Empire</h1>
    <div class="money" id="moneyBox">Money: $<span id="money">0</span></div>

    <div class="row">
      <button class="sell-btn" onclick="sellLemonade()">Sell Lemonade (<span id="lemonPriceDisplay">$1.00</span>)</button>
    </div>

    <div class="upgrade">
      <h2>Upgrades</h2>
      <div class="row">
        <button onclick="buyStand()">Buy Stand ($<span id="standCost">10</span>)</button>
        <button onclick="buyAdvertising()">Buy Advertising ($<span id="adCost">50</span>)</button>
        <button onclick="upgradePrice()">Upgrade Lemonade Price ($100)</button>
        <button onclick="upgradeEfficiency()">Upgrade Efficiency Stand ($150)</button>
      </div>
    </div>

    <div class="stats">
      <h2>Stats</h2>
      <p>Stands: <span id="stands">0</span></p>
      <p>Advertising Level: <span id="ads">0</span></p>
      <p><strong>Lemon Price</strong><br>
        Level: <span id="priceLevel">0</span><br>
        Current Price: $<span id="lemonPrice">1.00</span></p>
      <p><strong>Stand Efficiency</strong><br>
        Level: <span id="efficiencyLevel">0</span><br>
        Multiplier: x<span id="efficiencyMultiplier">1.00</span></p>
      <p>Income/sec: $<span id="income">0</span></p>
    </div>

    <div class="log" id="log"></div>

    <div class="bottom-reset">
      <button onclick="resetGame()">Reset</button>
    </div>
  </div>

  <script>
    // --- Game logic ---
    let money = 0, stands = 0, advertising = 0, standCost = 10, adCost = 50;
    let efficiencyLevel = 0, efficiencyMultiplier = 1;
    let priceLevel = 0, lemonPrice = 1;

    function updateDisplay() {
      document.getElementById('money').textContent = money.toFixed(2);
      document.getElementById('stands').textContent = stands;
      document.getElementById('ads').textContent = advertising;
      document.getElementById('standCost').textContent = standCost;
      document.getElementById('adCost').textContent = adCost;
      document.getElementById('income').textContent = getIncomePerSecond().toFixed(2);
      document.getElementById('efficiencyLevel').textContent = efficiencyLevel;
      document.getElementById('efficiencyMultiplier').textContent = efficiencyMultiplier.toFixed(2);
      document.getElementById('priceLevel').textContent = priceLevel;
      document.getElementById('lemonPrice').textContent = lemonPrice.toFixed(2);
      document.getElementById('lemonPriceDisplay').textContent = `$${(lemonPrice * efficiencyMultiplier).toFixed(2)}`;
    }

    function getIncomePerSecond() { return stands * (1 + advertising * 0.5) * (lemonPrice * efficiencyMultiplier); }
    function sellLemonade() { const salePrice = lemonPrice * efficiencyMultiplier; money += salePrice; log(`You sold a lemonade for $${salePrice.toFixed(2)}!`); updateDisplay(); }
    function buyStand() { if(money >= standCost){ money -= standCost; stands++; standCost = Math.floor(standCost*1.25); log("Bought a new lemonade stand!"); updateDisplay(); } else log("Not enough money for a stand."); }
    function buyAdvertising() { if(money >= adCost){ money -= adCost; advertising++; adCost = Math.floor(adCost*1.5); log("You bought some advertising!"); updateDisplay(); } else log("Can't afford advertising."); }
    function upgradePrice() { if(money >= 100){ money-=100; priceLevel++; lemonPrice=1+priceLevel*1.00; log("Upgraded lemonade price!"); updateDisplay(); } else log("Not enough money for Lemonade Price upgrade!"); }
    function upgradeEfficiency() { if(money >= 150){ money-=150; efficiencyLevel++; efficiencyMultiplier=1+efficiencyLevel*0.25; log("Upgraded efficiency!"); updateDisplay(); } else log("Not enough money for Efficiency upgrade!"); }
    function log(message){ const logBox=document.getElementById('log'); const time=new Date().toLocaleTimeString(); logBox.innerHTML+=`<div>&gt; [${time}] ${message}</div>`; logBox.scrollTop=logBox.scrollHeight; }
    function resetGame(){ localStorage.clear(); location.reload(); }

    setInterval(()=>{ money+=getIncomePerSecond(); updateDisplay(); },1000);
    setInterval(()=>{ localStorage.setItem("lemonadeSave", JSON.stringify({ money, stands, advertising, standCost, adCost, efficiencyLevel, priceLevel })); },3000);

    window.onload=()=>{
      if(!localStorage.getItem('visitedBefore')){ money+=100; localStorage.setItem('visitedBefore','true'); log("Welcome! You received a $100 bonus for your first visit."); }
      const save=JSON.parse(localStorage.getItem("lemonadeSave"));
      if(save){ money=save.money??0; stands=save.stands??0; advertising=save.advertising??0; standCost=save.standCost??10; adCost=save.adCost??50; efficiencyLevel=save.efficiencyLevel??0; efficiencyMultiplier=1+efficiencyLevel*0.25; priceLevel=save.priceLevel??0; lemonPrice=1+priceLevel*1.00; log("Game loaded."); } else log("Welcome to Lemonade Stand Tycoon!");
      updateDisplay();
    };

    // --- Neon particle effects ---
    const canvas=document.getElementById('particleCanvas');
    const ctx=canvas.getContext('2d');
    let particles=[];
    function resizeCanvas(){ canvas.width=window.innerWidth; canvas.height=window.innerHeight; }
    window.addEventListener('resize',resizeCanvas); resizeCanvas();

    function createParticles(count=150){
      particles=[];
      for(let i=0;i<count;i++){
        const color = Math.random()<0.5 ? 'hsl(60,100%,50%)' : 'hsl(180,100%,50%)'; // yellow or blue
        particles.push({
          x: Math.random()*canvas.width,
          y: Math.random()*canvas.height,
          r: Math.random()*2+1,
          dx: (Math.random()-0.5)*0.5,
          dy: (Math.random()-0.5)*0.5,
          color: color,
          alpha: Math.random()
        });
      }
    }
    createParticles(150);

    function animateParticles(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      particles.forEach(p=>{
        p.x+=p.dx; p.y+=p.dy;
        if(p.x<0)p.x=canvas.width; if(p.x>canvas.width)p.x=0;
        if(p.y<0)p.y=canvas.height; if(p.y>canvas.height)p.y=0;
        ctx.beginPath();
        ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
        ctx.fillStyle=`hsla(${p.color.includes('60') ? 60 : 180},100%,50%,${p.alpha})`;
        ctx.shadowBlur=8;
        ctx.shadowColor=p.color;
        ctx.fill();
      });
      requestAnimationFrame(animateParticles);
    }
    animateParticles();

    function flickerCanvas(interval, minOpacity=0.5, maxOpacity=1, duration=150) {
      setInterval(() => {
        canvas.style.opacity = minOpacity + Math.random()*(maxOpacity-minOpacity);
        setTimeout(() => { canvas.style.opacity = maxOpacity; }, duration);
      }, interval);
    }
    flickerCanvas(15000, 0.6, 1, 200);
    flickerCanvas(27000, 0.5, 0.9, 120);
    flickerCanvas(42000, 0.55, 1, 180);
  </script>
</body>
</html>
